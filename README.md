# Telegram 檔案管理器 (telegram-file-manager)

一個功能強大且靈活的網頁檔案管理器。它使用 Express 和 Node.js 構建，並提供可插拔的儲存後端，您可以選擇將檔案安全地儲存在 **Telegram 頻道**或**本地伺服器**上。

本專案從一個簡單的工具演變而來，現在已具備完整的多使用者權限管理、豐富的檔案操作介面和系統管理功能，適合作為個人雲端硬碟或小型團隊的檔案協作平台。

## ✨ 特色功能

#### 👨‍👩‍👧‍👦 完整的使用者系統

* **管理員與普通使用者**：系統地區分管理員和普通使用者權限。
* **使用者註冊**：開放使用者註冊功能，每位使用者擁有獨立的儲存空間。
* **帳號管理**：使用者可自行修改密碼（需驗證舊密碼）；管理員擁有一鍵新增、修改密碼、刪除普通使用者的權限。
* **安全隔離**：每個使用者的檔案和資料夾都是完全隔離的，確保了資料的私密性。

#### 🗄️ 靈活的儲存後端

* **Telegram 儲存**：利用 Telegram 的無限容量，將您的檔案作為訊息安全地儲存在指定的頻道中。
* **本地伺服器儲存**：直接將檔案儲存在運行伺服器的 `data/uploads` 目錄下，按使用者 ID 自動分資料夾存放。
* **一鍵切換**：管理員可在管理後台頁面隨時切換儲存模式，以適應不同需求。

#### 📂 強大的檔案管理

* **全功能操作**：支援檔案和資料夾的建立、上傳、下載、重新命名、移動和刪除。
* **拖拽上傳**：支援拖拽多個檔案直接上傳到目前目錄，並附有進度條顯示。
* **智慧型檢查**：在上傳和移動時，會自動進行同名檔案檢查，並提示使用者是否覆蓋。
* **打包下載**：支援多選檔案和資料夾，一鍵打包為 `.zip` 檔案下載。

#### 📝 線上編輯與預覽

* **文字檔案編輯器**：直接在網頁上建立 (`.txt`) 或編輯現有文字檔案，支援即時儲存並可隨時返回。
* **線上預覽**：支援圖片、影片、純文字等多種類型檔案的線上預覽。
* **影片縮圖**：無論使用 Telegram 還是本地儲存，影片檔案都能在列表中正確顯示縮圖。

#### 🔗 安全的檔案分享

* **連結分享**：可為單一檔案建立有時效性（如 1 小時、1 天、永久）或永久的公開分享連結。
* **分享管理**：在「管理共享」頁面，可以查看所有正在分享的檔案並隨時取消分享。
* **純文字直接顯示**：分享的純文字檔案會直接在頁面中以閱讀模式顯示，而非預覽框。

## 🚀 安裝與設定

在開始之前，請確保您的系統已安裝 `Git` 和 `Node.js` (v16+)。

#### 1. 一鍵安裝腳本

打開您的 Linux 或 macOS 終端機，執行以下任一命令即可下載並安裝基礎依賴：

**使用 `curl` (推薦):**
```bash
bash -c "$(curl -fsSL [https://raw.githubusercontent.com/Limkon/telegram-file-manager/master/install.sh](https://raw.githubusercontent.com/Limkon/telegram-file-manager/master/install.sh))"

#### 2. 設定環境變數
安裝腳本執行完畢後，您需要在專案根目錄下手動建立一個名為 .env 的檔案，並填入以下內容：

程式碼片段

# 必填：從 @BotFather 取得您的 Telegram Bot Token
BOT_TOKEN=your_bot_token_here

# 必填：您的 Telegram 頻道的 ID (必須為私有頻道，並將 Bot 設為管理員)
CHANNEL_ID=your_channel_id_here

# 必填：設定網站的初始管理員帳號
ADMIN_USER=admin
ADMIN_PASS=your_admin_password

# 必填：用於加密 Session 的隨機密鑰，請換成一個複雜的隨機字串
SESSION_SECRET=a8e2a32e9b1c7d5f6a7b3c4d5e8f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f
