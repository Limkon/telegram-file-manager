# Telegram 文件管理器 (telegram-file-manager)

一個功能強大且靈活的網頁文件管理器。它使用 Express 和 Node.js 構建，並提供可插拔的保存後端，您可以選擇將文件安全地保存在 **Telegram 頻道**或**本地伺服器**上。

本專案從一個簡單的工具演變而來，現在已具備完整的多用户權限管理、豐富的文件操作介面和系統管理功能，適合作為個人雲端硬碟或小型團隊的文件協作平台。

## ✨ 特色功能

#### 👨‍👩‍👧‍👦 完整的用户系統

* **管理员與普通用户**：系統地區分管理员和普通用户權限。
* **用户注册**：開放用户注册功能，每位用户擁有獨立的保存空間。
* **账号管理**：用户可自行修改密码（需驗證舊密码）；管理员擁有一鍵新增、修改密码、删除普通用户的權限。
* **安全隔離**：每個用户的文件和文件夹都是完全隔離的，確保了数据的私密性。

#### 🗄️ 靈活的保存後端

* **Telegram 保存**：利用 Telegram 的無限容量，將您的文件作為信息安全地保存在指定的頻道中。
* **本地伺服器保存**：直接將文件保存在運行伺服器的 `data/uploads` 目录下，按用户 ID 自動分文件夹存放。
* **一鍵切換**：管理员可在管理後台頁面隨時切換保存模式，以適應不同需求。

#### 📂 強大的文件管理

* **全功能操作**：支援文件和文件夹的建立、上传、下载、重新命名、移動和删除。
* **拖拽上传**：支援拖拽多個文件直接上传到目前目录，並附有進度條显示。
* **智慧型檢查**：在上传和移動時，會自動進行同名文件檢查，並提示用户是否覆蓋。
* **打包下载**：支援多選文件和文件夹，一鍵打包為 `.zip` 文件下载。

#### 📝 線上编辑與预览

* **文字文件编辑器**：直接在網頁上建立 (`.txt`) 或编辑現有文字文件，支援即時保存並可隨時返回。
* **線上预览**：支援圖片、影片、純文字等多種類型文件的線上预览。
* **影片縮圖**：無論使用 Telegram 還是本地保存，影片文件都能在列表中正確显示縮圖。

#### 🔗 安全的文件分享

* **連結分享**：可為單一文件建立有時效性（如 1 小時、1 天、永久）或永久的公開分享連結。
* **分享管理**：在「管理共享」頁面，可以查看所有正在分享的文件並隨時取消分享。
* **純文字直接显示**：分享的純文字文件會直接在頁面中以閱讀模式显示，而非预览框。

## 🚀 安裝與设置

在開始之前，請確保您的系統已安裝 `Git` 和 `Node.js` (v16+)。

#### 1. 一鍵安裝腳本

打開您的 Linux 或 macOS 終端機，執行以下任一命令即可下载並安裝基礎依賴：

**使用 `curl` (推薦):**
```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/Limkon/telegram-file-manager/master/install.sh)"
 ```
#### 2. 设置環境變數
安裝腳本執行完畢後，您需要在專案根目录下手動建立一個名為 .env 的文件，並填入以下内容：

**必填：從 @BotFather 取得您的 Telegram Bot Token
BOT_TOKEN=your_bot_token_here

** 必填：您的 Telegram 頻道的 ID (必須為私有頻道，並將 Bot 設為管理员)
CHANNEL_ID=your_channel_id_here

**必填：设置網站的初始管理员账号
ADMIN_USER=admin
ADMIN_PASS=your_admin_password

**必填：用於加密 Session 的隨機密鑰，請換成一個複雜的隨機字串
SESSION_SECRET=a8e2a32e9b1c7d5f6a7b3c4d5e8f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f
